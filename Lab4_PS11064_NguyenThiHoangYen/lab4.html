<!DOCTYPE html>
<html>
    <head>
        <title>PS11064_Lab 4</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="bootstrap-4.0.0/bootstrap-4.0.0/dist/css/bootstrap-grid.css" rel="stylesheet" type="text/css"/>
        <link href="bootstrap-4.0.0/bootstrap-4.0.0/dist/css/bootstrap-grid.min.css" rel="stylesheet" type="text/css"/>
        <link href="bootstrap-4.0.0/bootstrap-4.0.0/dist/css/bootstrap-reboot.min.css" rel="stylesheet" type="text/css"/>
        <link href="bootstrap-4.0.0/bootstrap-4.0.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <style>
            header {
                text-align: center;
            }
            header nav ul {
                display: flex;
                justify-content: center;
            }
            header nav ul li {
                list-style-type: none;
                margin-right: 20px;
            }
            #target {
                width: 100px;
                height: 100px;
                background-color: #ebebeb;
                color: #000;
                border-radius: 5px;
                transition: all .4s;
            }
            main article {
                margin: 40px auto;
                text-align: center;
            }
            main article div {
                margin: 0 auto;
            }
            main article div#target {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            #h3 {
                border: 1px solid #b6b6b6;
                width: 500px;
                height: auto;
                margin: 10px auto;
                border-radius: 5px;
                padding: 10px 20px;
                display: block;
            }
            #target-2 {
                width: 300px;
                height: auto;
                margin-top: 10px;
                border-radius: 5px;
            }
            #title-1 {
                color: red;
                font-size: 26px;
                margin-right: 10px;
            }
            form {
                display: flex;
                width: 800px;
                justify-content: center;
                text-align: center;
                margin: auto;
            }
            article {
                /*display: none;*/
            }
            #target-1 img {
                width: 100px;
            }
        </style>
        <header>
            <h1>Lab4</h1>
            <nav>
                <ul>
                    <li class="btn btn-primary test-trans-btn" data-test="1">Bài 1</li>
                    <li class="btn btn-primary test-trans-btn" data-test="2">Bài 2</li>
                    <li class="btn btn-primary test-trans-btn" data-test="3">Bài 3</li>
                    <li class="btn btn-primary test-trans-btn" data-test="4">Bài 5 & 6</li>
                </ul>
            </nav>
        </header>
        <main>
            <article data-test="1" style="display: none;">
                <table class="table table-bordered table-hover" style="width:400px; margin:auto;">
                    <tbody class="">
                        <tr style=" ">
                            <th scope="row"><i>Cân nặng:</i></th>
                            <td>
                                <input id="kg" class=" form-control" type="number" placeholder="...">
                            </td>
                        </tr>
                        <tr style=" ">
                            <th scope="row"><i>Chiều cao:</i></th>
                            <td>
                                <input id="tall" class=" form-control" type="number" placeholder="...">
                            </td>
                        </tr>

                        <tr style=" ">
                            <th colspan="100%">
                                <button class="btn btn-success add-element">Tính</button>
                            </th>
                        </tr>
                    <tbody>
                </table>
                <table class="table table-striped table-dark" style="width: 500px; margin: 20px auto;">
                    <tbody id="target-1"></tbody>
                </table>
            </article>
            <article data-test="2" style="display: none;">
                <h2>Bài 2</h2>
                <input id="searchName" style="width: 300px; margin: auto;" placeholder="nhập tên..." type="text" class="form-control">
                <table class="table table-striped table-dark tes1" style="width: 1140px; margin: 20px auto;">
                    <thead>
                        <tr>
                            <th scope="col">Họ tên</th>
                            <th scope="col">Điểm</th>
                            <th scope="col">Xếp loại</th>
                        </tr>
                    </thead>
                    <tbody id="target-2"></tbody>
                </table>
            </article>  
            <article data-test="3">
                <h2>Bài 3</h2>
                <form action="javascript: void(0);">
                    <input class="form-control sbj" id="sbj" type="text" placeholder="Subject Name">
                    <input style="margin: 0 10px;" id="point" class="form-control month" type="number" min="0" max="10" placeholder="Point">
                </form>
                <button class="btn btn-success add-element-2" style="margin: 10px 0;">Thêm</button>
                <table class="table table-striped table-dark tes1" style="width: 1140px; margin: 20px auto;">
                    <thead>
                        <tr>
                            <th scope="col">Tên môn học</th>
                            <th scope="col">Điểm</th>
                            <th scope="col">Kết quả</th>
                            <th scope="col">Đánh giá</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="target-3">
                            <td id="mot"></td>
                            <td id="hai"></td>
                            <td id="ba"></td>
                            <td id="bon"></td>
                        </tr>
                    </tbody>
                </table>
            </article>  
        </main>
        <script src="jquery.js" type="text/javascript"></script>
        <script src="moment.js" type="text/javascript"></script>
        <script>
//            for toggle
            $(".test-trans-btn").click(function(){
               $(".test-trans-btn").addClass("btn-primary");
               $(".test-trans-btn").removeClass("btn-success");
               $(this).removeClass("btn-primary");
               $(this).addClass("btn-success");
               var dataTest = $(this).data("test");
               $("article").css("display", "none");
               $("article[data-test="+dataTest+"]").slideToggle("fade");
            });
//            
//            bai 1
            var addElement = document.getElementsByClassName("add-element")[0];
            var target2 = document.querySelector("#target-2");
            function calcBMI (x, y) {
                var calc = x*1/(Math.pow(y/100,2));
                calc = Math.round(calc * 10) / 10;
                if(calc < 18.5) {
                    return `<tr style=" ">
                                <th scope="row"><i>BMI của bạn là:</i></th>
                                <td>
                                   ${calc}
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Hình ảnh:</i></th>
                                <td>
                                   <img src="img/1.jpg" alt=""/>
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Đánh giá:</i></th>
                                <td>
                                   Bạn đang quá gầy nên cần ăn uống nhiều hơn, hãy ăn các loại tinh bột hấp thu nhanh như cơm trắng, bánh mì để tăng cân tốt nhất nhé!
                                </td>
                            </tr>
                            `;
                }
                if(calc >= 18.5 && calc <= 24.9) {
                    return `<tr style=" ">
                                <th scope="row"><i>BMI của bạn là:</i></th>
                                <td>
                                   ${calc}
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Hình ảnh:</i></th>
                                <td>
                                   <img src="img/2.jpg" alt=""/>
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Đánh giá:</i></th>
                                <td>
                                   Bạn có 1 thân hình thật cân đối, hãy cố gắng tập thể dục để khỏe mạnh hơn mỗi ngày nhé!
                                </td>
                            </tr>
                            `;
                }
                if(calc >= 25) {
                    return `<tr style=" ">
                                <th scope="row"><i>BMI của bạn là:</i></th>
                                <td>
                                   ${calc}
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Hình ảnh:</i></th>
                                <td>
                                   <img src="img/3.jpg" alt=""/>
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Đánh giá:</i></th>
                                <td>
                                   Bạn hơi thừa cân 1 chút, xin hãy tập thể dục nhiều hơn để có 1 thân hình cân đối!
                                </td>
                            </tr>
                            `;
                }
                if(calc > 25 && calc <= 29.9) {
                    return `<tr style=" ">
                                <th scope="row"><i>BMI của bạn là:</i></th>
                                <td>
                                   ${calc}
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Hình ảnh:</i></th>
                                <td>
                                   <img src="img/3.jpg" alt=""/>
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Đánh giá:</i></th>
                                <td>
                                   Bạn đang bị tiền béo phì, hãy chú ý tập thể dục và theo dõi sức khỏe của mình thường xuyên hơn.
                                </td>
                            </tr>
                            `;
                }
                if(calc >= 30 && calc <= 34.9) {
                    return `<tr style=" ">
                                <th scope="row"><i>BMI của bạn là:</i></th>
                                <td>
                                   ${calc}
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Hình ảnh:</i></th>
                                <td>
                                   <img src="img/5.jpg" alt=""/>
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Đánh giá:</i></th>
                                <td>
                                   Bạn đang bị béo phì loại 1, hãy chú ý tập thể dục và theo dõi sức khỏe của mình thường xuyên hơn.
                                </td>
                            </tr>
                            `;
                }
                if(calc >= 35 && calc <= 39.9) {
                    return `<tr style=" ">
                                <th scope="row"><i>BMI của bạn là:</i></th>
                                <td>
                                   ${calc}
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Hình ảnh:</i></th>
                                <td>
                                   <img src="img/5.jpg" alt=""/>
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Đánh giá:</i></th>
                                <td>
                                   Bạn đang bị béo phì loại 2, hãy chú ý tập thể dục, tránh ăn tinh bột nhiều và đi đến bác sĩ để được tư vấn kỹ hơn.
                                </td>
                            </tr>
                            `;
                }
                if(calc >= 40) {
                    return `<tr style=" ">
                                <th scope="row"><i>BMI của bạn là:</i></th>
                                <td>
                                   ${calc}
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Hình ảnh:</i></th>
                                <td>
                                   <img src="img/5.jpg" alt=""/>
                                </td>
                            </tr>
                            <tr style=" ">
                                <th scope="row"><i>Đánh giá:</i></th>
                                <td>
                                   Bạn đang bị béo phì loại 3, hãy chú ý tập thể dục, tránh ăn tinh bột nhiều và đi đến bác sĩ để được tư vấn kỹ hơn, chú ý nhiều về sức khỏe của mình hơn, sức khỏe của bạn đang rất đáng lo ngại!!!
                                </td>
                            </tr>
                            `;
                }
            }
            addElement.addEventListener("click",function(){
                var kg = document.querySelector("#kg").value;
                var tall = document.querySelector("#tall").value;
                var e = calcBMI(kg, tall);
                var newDom = document.querySelector("#target-1");
                newDom.innerHTML += e;
                document.querySelector("#kg").value = "";
                document.querySelector("#tall").value = "";
            });
//            ------------
//            bai 2
            var listSv = [
                {ht: "Mai Thanh Toán", diem: 6},
                {ht: "Thị Hoài", diem: 4},
                {ht: "Hồ Gươm", diem: 9},
                {ht: "Thu Huyền", diem: 10},
                {ht: "Thu Thủy", diem: 5},
                {ht: "Hoàng Yến", diem: 10}
            ];
            var target2 = document.querySelector("#target-2");
            target2.innerHTML = "";
            function load() {
                target2.innerHTML = "";
                listSv.forEach(function(value, index){
                var e = `
                        <tr>
                            <td>${value.ht}</td>
                            <td>${value.diem}</td>
                            <td>${(value.diem >= 9) ? "Giỏi" : "Cũng tạm"}</td>
                        </tr>
                        `;
                target2.innerHTML += e;
                });
            }
            load();
            const selectElement = document.querySelector('#searchName');
            selectElement.addEventListener('change', (event) => {
                target2.innerHTML = "";
                const names = selectElement.value;
                const nameFilter = listSv.filter(function(e){
                    const rex = /.*/;
                    return e.ht.match(names + rex.source);
                });
                nameFilter.forEach(function(value, index){
                var e = `
                        <tr>
                            <td>${value.ht}</td>
                            <td>${value.diem}</td>
                            <td>${(value.diem >= 9) ? "Giỏi" : "Cũng tạm"}</td>
                        </tr>
                        `;
                target2.innerHTML += e;
                });
            });
           
            
//            ----------
//            bai 3
            var target3 = document.querySelector("#target-3");
            var mot = document.querySelector("#mot");
            var hai = document.querySelector("#hai");
            var ba = document.querySelector("#ba");
            var bon = document.querySelector("#bon");
//            target3.innerHTML = "";
            mot.innerHTML = "";
            hai.innerHTML = "";
            ba.innerHTML = "";
            bon.innerHTML = "";
            
//            handlePoint("PHP", result);
            
            function handlePoint(sbjName, point, call){
                const points = parseFloat(point);
                mot.innerHTML = sbjName;
                hai.innerHTML = points;
                call(points, sbjName, notificate);
            }
            
            function result(point, sbjName, call) {
                if(point >=5) ba.innerHTML = "Qua Môn";
                else ba.innerHTML = "Rớt Môn";
                call(point, sbjName);
            }
           
            function notificate(point, sbjName) {
                if(point<5) bon.innerHTML = "Bạn ơi đóng tiền học lại nhé, thất bại thì làm lại, đừng no nắng!";
                else if(point<= 7.5) bon.innerHTML = "Bạn được qua môn rồi, good job!";
                else bon.innerHTML = "Thánh cmnr!";
            }
            var addElement2 = document.getElementsByClassName("add-element-2")[0];
            addElement2.addEventListener("click",function(){
                var sbj = document.querySelector("#sbj").value;
                var point = document.querySelector("#point").value;
                handlePoint(sbj,point, result);
                document.querySelector("#kg").value = "";
                document.querySelector("#tall").value = "";
            });
            
            
            
//            --------
//            bai 4
            async function ThucDay(){
                console.log("b1. Đã ngủ dậy");
                var ThamSauKhiThucDay = await DanhRang();
                console.log(ThamSauKhiThucDay);
                var ThamSauKhiDanhRang = await ThayQuanAo();
                console.log(ThamSauKhiDanhRang);
                var ThamSauKhiThayQuanAo = await DiNgu();
                console.log(ThamSauKhiThayQuanAo);
            }
            function DanhRang(){
                return new Promise(resolve => {
                   console.log("b2. Đang đánh răng");
                   setTimeout(function(){
                    resolve("Đánh răng xong."); 
                }, 2000);  
                });
            }      
            function ThayQuanAo(){
                return new Promise(resolve => {
                   console.log("b3. Đang thay đồ");
                   setTimeout(function(){
                    resolve("Đã thay xong."); 
                }, 3000);  
                });
            }      
            function DiNgu(){
                return new Promise(resolve => {
                   console.log("b4. Đang nhắm mắt...");
                   setTimeout(function(){
                    resolve("Thám đã ngủ...zzz.zz"); 
                }, 4000);  
                });
            }   
            ThucDay();
            
//            function ThucDay(tieptheo){
//                console.log("b1. Đã ngủ dậy");
//                tieptheo();
//            }
//            function DanhRang(tieptheo){
//                console.log("b2. Đang đánh răng");
//                setTimeout(function(){
//                   console.log("Đánh răng xong."); 
//                   tieptheo();
//                }, 2000);  
//            }
//            function ThayQuanAo(tieptheo){
//                console.log("b3. Đang thay đồ");
//                setTimeout(function(){
//                   console.log("Đã thay xong."); 
//                   tieptheo();
//                }, 3000);  
//            }
//            function DiNgu(tieptheo) {
//                tieptheo();
//            }
//            
//            function ThamThucDay() {
//                DanhRang(ThamDanhRang);
//            }
//            function ThamDanhRang(){
//                ThayQuanAo(ThamThayQuanAo);
//            }
//            function ThamThayQuanAo(){
//                DiNgu(ThamDiNguTiep);
//            }
//            function ThamDiNguTiep(){
//                console.log("b4. Đang nhắm mắt...");
//                setTimeout(function(){
//                   console.log("Thám đã ngủ...zzz.zz"); 
//                }, 4000);
//            }
//            ThucDay(ThamThucDay);
        </script>
    </body>
</html>
